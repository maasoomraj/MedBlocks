"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function autoScroll(e,t,n){void 0==t&&(t=.6),void 0==n&&(n=function(){return!1}),window.is_firefox=navigator.userAgent.indexOf("Firefox")>-1,window.is_explorer=navigator.userAgent.indexOf("MSIE")>-1,window.is_trident=navigator.userAgent.indexOf("Trident")>-1,window.is_edge=navigator.userAgent.indexOf("Edge")>-1,window.is_firefox||window.is_explorer||window.is_trident||window.is_edge?(window.scrollTo(0,e),n()):$("body").animate({scrollTop:e},1e3*t*window.tk,function(){n()})}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),Contact=function(){function e(){_classCallCheck(this,e);var t=this;$("#contactform").off("submit").on("submit",function(e){e.preventDefault();var n=t.validated();if(n.validated){var i={email:e.target.elements.user_email.value,name:e.target.elements.user_name.value,message:$(e.target).find("textarea")[0].value};$.ajax({type:"POST",url:"/bin/sendemail.php",data:i,success:function(n){document.getElementById("thanku_checkbox").checked=!0,e.target.elements.user_email.value="",e.target.elements.user_name.value="",$(e.target).find("textarea")[0].value="",$("#contactform .input-wrap").removeClass("error"),t.thankuPage()},error:function(e){alert("Something went wrong and message is not sent!"),console.log(e),$("#contactform .input-wrap").removeClass("error")}})}else $("#contactform").find(".input-wrap."+n.inputs[0]).addClass("error")}).off("keypress").on("keypress",".field",function(e){$(e.target).closest(".input-wrap").removeClass("error")})}return _createClass(e,[{key:"validated",value:function(){var e=($("#contactform"),{email:$('#contactform [name="user_email"]')[0].value,name:$('#contactform [name="user_name"]')[0].value,message:$("#contactform textarea")[0].value}),t={validated:!1,inputs:[]},n=/^(([^<>()\[\]\.,;:\s@\"]+(\.[^<>()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i;return e.name.length<3?t.inputs.push("name"):n.test(e.email)?e.message.length<=0?t.inputs.push("message"):t.validated=!0:t.inputs.push("email"),t}},{key:"thankuPage",value:function(){var e=this;$("body").append('<iframe id="thankuiframe" src="/thank-you" width="1" height="1" align="left"></iframe>'),setTimeout(function(){$("#thankuiframe").remove(),e.hasIframe=!1},1e3)}}]),e}(),Engine=function(){function e(){var t=this;_classCallCheck(this,e);var n=window.pageYOffset,i=$(".marker[data-marker]"),a=$(".pathmarker[data-marker]");this.activeItem=null,this.activeItems=[],this.activePath=null;for(var o=0;o<=15;o++)this.activeItems[o]=!1;window.is_safari&&$("[data-safari-active]").addClass("always-active"),$(window).off("scroll.engineScroll").on("scroll.engineScroll",function(){var e=window.pageYOffset,o=e>n;a.each(function(n,i){if($(i).offset().top-e<=window.innerHeight/2&&$(i).offset().top-e+$(i).outerHeight()>=window.innerHeight/2){var a=$(i).attr("data-marker");t.playPath(a,o)}}),i.each(function(n,i){if($(i).offset().top-e<=window.innerHeight/2&&$(i).offset().top-e+$(i).outerHeight()>=window.innerHeight/2){var a=$(i).attr("data-marker");t.activateComponent(a,i)}}),n=e})}return _createClass(e,[{key:"playPath",value:function(e,t){if(this.activePath!=e){var n=t?e-1:e,i=t?'[data-apath-animation-nr="'+n+'"]':'[data-apath-animation-nr-rev="'+n+'"]';$(i).each(function(e,t){t.beginElement()}),0==e&&null!=this.activePath&&autoScroll(0,.6*window.tk),this.activePath=e}}},{key:"activateComponent",value:function(e,t){var n=this;this.activeItem!=e&&(15==e?(autoScroll($(t).offset().top+$(t).outerHeight(),1.2*window.tk),$(".contactus_bottom_link").addClass("hidden")):$(".contactus_bottom_link").removeClass("hidden"),this.activeItem=e,clearTimeout(this.componentTimeout),this.componentTimeout=setTimeout(function(){for(var t=0;t<=15;t++)1==n.activeItems[t]&&($('[data-canima-item="'+t+'"]').removeClass("active"),window.is_safari?($('[data-canima-rev="'+t+'"]').each(function(e,t){void 0==$(t).attr("data-safari-noanima")&&t.beginElement()}),$('[data-canima="'+t+'"]').each(function(e,t){t.parentNode.replaceChild(t.cloneNode(!1),t)})):$('[data-canima-rev="'+t+'"]').each(function(e,t){t.beginElement()}),n.activeItems[t]=!1);clearTimeout(n.componentInterTimeout),n.componentInterTimeout=setTimeout(function(){$('[data-canima-item="'+e+'"]').addClass("active"),$('[data-canima="'+e+'"]').each(function(e,t){t.beginElement()}),n.activeItems[e]=!0},100)},200*window.tk))}}]),e}();!function(e,t,n,i,a,o,r){e.GoogleAnalyticsObject=a,e[a]=e[a]||function(){(e[a].q=e[a].q||[]).push(arguments)},e[a].l=1*new Date,o=t.createElement(n),r=t.getElementsByTagName(n)[0],o.async=1,o.src="https://www.google-analytics.com/analytics.js",r.parentNode.insertBefore(o,r)}(window,document,"script",0,"ga"),ga("create","UA-49005823-2","auto"),ga("send","pageview");var HeroSection=function(){function e(){_classCallCheck(this,e);var t=this;$(window).on("resize",function(){t.resizeSVG()}).trigger("resize")}return _createClass(e,[{key:"resizeSVG",value:function(){var e=$("#mhero_svg"),t=$(".dimsample").outerWidth(),n=$(".dimsample").outerHeight()/window.innerHeight>1.4?$(".dimsample").outerHeight():window.innerHeight;e.attr("width",t+"px").attr("height",n+"px")}}]),e}(),HeroText=function(){function e(){_classCallCheck(this,e),this.textObject=$("#hero_text p"),this.textObject.length&&this.makeAwesomeHeroText()}return _createClass(e,[{key:"makeAwesomeHeroText",value:function(){var e=this,t=this.textObject.html().replace(/\n/g,"").replace("</br>","<br>").trim().split("<br>");this.textObject.html(""),$.each(t,function(t,n){var i=n.split("");$.each(i,function(t,n){e.textObject.append("<span>"+n+"</span>")}),e.textObject.append("<br>")})}}]),e}(),Loader=function(){function e(t,n){_classCallCheck(this,e);var i=this;this.bodyPath=t,this.titles=n,this.initingItem=0,$(window).on("load",function(){$("body").css({display:""}),$(window).on("resize",function(){i.resetPage(function(){i.resetAnimations(),i.getBodySvg(),i.titles.init()})}).trigger("resize")})}return _createClass(e,[{key:"getBodySvg",value:function(){document.getElementById("body_svg")||console.log("ERROR: no body svg document")}},{key:"resetPage",value:function(e){if(0!==window.pageYOffset)var t=setTimeout(function(){clearTimeout(t),e()},10);else e()}},{key:"resetAnimations",value:function(){$("[data-reset-anima]").each(function(e,t){t.beginElement()})}}]),e}(),BodySection=function(){function e(){_classCallCheck(this,e);var t=this,n=$("#mbody_svg");this.hw=n.attr("oheight")/n.attr("owidth"),$(window).on("resize",function(){t.resizeSVG()}).trigger("resize")}return _createClass(e,[{key:"resizeSVG",value:function(){var e=$("#mbody_svg"),t=$(".dimsample").outerWidth(),n=$(".dimsample").outerHeight();n/screen.height<.66&&(n=screen.height),void 0!=window.orientation&&90==Math.abs(window.orientation)&&(t=screen.height,n=screen.width),n>t?e.attr("width",t+"px").attr("height",Math.floor(t*this.hw*2.4)+"px"):e.attr("width",t+"px").attr("height",Math.floor(t*this.hw)+"px")}}]),e}(),MobMenu=function e(){_classCallCheck(this,e),$(window).off("resize.mobMenu").on("resize.mobMenu",function(){var e=$(".mtitles"),t=$("#mbody_svg"),n=t.outerHeight();e.outerHeight(n)}).trigger("resize.mobMenu"),$(window).off("scroll.mobMenu").on("scroll.mobMenu",function(){window.pageYOffset>.05*window.innerHeight?$("header.header").removeClass("hidden"):0==document.getElementById("main_menu_checkbox").checked&&$("header.header").addClass("hidden")}).trigger("scroll.mobMenu"),$("#main_menu_checkbox").off("change.headerInput").on("change.headerInput",function(e){0==e.target.checked&&$(window).trigger("scroll.mobMenu")}),$(document).off("touchstart click").on("touchstart click","[data-menu]",function(e){var t,n=Math.floor($(e.currentTarget).attr("data-menu"));switch(n){case 0:t=0;break;case 15:t=$("[data-title-item=15]").offset().top+$("[data-title-item=15]").outerHeight();break;default:t=$("[data-title-item="+n+"]").offset().top-2*$(".main-menu-on").outerHeight()}document.getElementById("main_menu_checkbox").checked=!1,$("body").animate({scrollTop:t},600)})},Menu=function e(){_classCallCheck(this,e),$("body").off("click.menuClick").on("click.menuClick","[data-menu]",function(e){var t,n=Math.floor($(e.currentTarget).attr("data-menu"));t=15==n?$("section.section-body").outerHeight()+$("section.section-body").offset().top:0==n?0:$("[data-marker="+n+"]").offset().top-window.innerHeight/2+$("[data-marker="+n+"]").outerHeight()/2,autoScroll(t),document.getElementById("main_menu_checkbox").checked=!1})},Path=function(){function e(){_classCallCheck(this,e),this.inited=!1,this.pathCurveSvgHeight=Math.floor($("#body_svg").attr("height").replace("px","")),this.runner=document.getElementById("body_runner"),this.pathes=[],this.pathesDown={},this.pathesUp={},this.speed=[.8,.5,.5,.9,.4,.4,.6,.4,.4,.5,.8,.8,.8,.8,.8,.8],this.currentItem=0,this.currentFastItem=0,this.isAnimating=!1,this.scrollDir="down"}return _createClass(e,[{key:"init",value:function(e){var t=this;this.inited=!1,this.svgDoc=e.svgDoc,this.svgDim=e.svgDim,this.currentItem=e.initingItem,this.currentFastItem=e.initingItem,this.inited=!0,this.calculatePathes(),this.inElements={},this.watchErrorsInterval,clearInterval(this.watchErrorsInterval),this.watchErrorsInterval=setInterval(function(){t.watchErrors()},1e3)}},{key:"calculatePathes",value:function(){var e=this,t=this;this.pathes=[];for(var n=this.svgDim.height/this.pathCurveSvgHeight,i=0;i<$(".body-apath").length;i++){var a=$(this.svgDoc).find('[data-apath-nr="'+i+'"]')[0].getBBox();this.pathes[i]={start:Math.round(n*a.y+this.svgDim.top),end:Math.round(n*(a.y+a.height)+this.svgDim.top)}}var o=window.pageYOffset,r=window.innerHeight;this.currentItem>0&&this.animateAlongPath("down",this.currentItem),$(window).off("scroll.bodyPath").on("scroll.bodyPath",function(){var n=window.pageYOffset;if(n<o){e.scrollDir="up";var i=t.currentItem>0&&t.pathes[t.currentItem-1].end>n+.85*r&&t.pathes[t.currentItem-1].end<=n+1*r||0==t.currentItem&&t.pathes[0].start>n+.85*r&&t.pathes[0].start<=n+1*r,a=(t.currentItem>0&&t.pathes[t.currentItem-1].start<n+.15*r&&t.pathes[t.currentItem-1].start,t.currentItem>0&&t.pathes[t.currentItem-1].start>n+1*r);if(i)t.animateAlongPath("up");else if(a&&void 0!=t.currentItem){var s=t.pathes.reduce(function(e,t,i){return Math.abs(t.start-(n+.33*r))<Math.abs(e.start-(n+.33*r))?{start:t.start,index:i}:e}),c=void 0!=s.index?s.index:0;t.currentItem=s.index,setTimeout(function(){$(".active[data-canima-item]").removeClass("active"),t.playItem(c)},10)}}else if(n>=o){e.scrollDir="down";var l=t.currentItem<t.pathes.length&&t.pathes[t.currentItem].start<n+.1*r&&t.pathes[t.currentItem].start>=n-.08*r||t.currentItem==t.pathes.length&&t.pathes[t.currentItem-1].end<n+.1*r&&t.pathes[t.currentItem-1].end>=n-.08*r,u=t.currentItem<t.pathes.length&&t.pathes[t.currentItem].end>n+.86*r&&t.pathes[t.currentItem].end<=n+.88*r,h=t.currentItem<t.pathes.length&&t.pathes[t.currentItem].end<=n+.1*r;if(l)t.animateAlongPath();else if(u)t.animateAlongPath();else if(h&&void 0!=t.currentItem){console.log("down crazy"),t.isAnimating=!0;var s=t.pathes.reduce(function(e,t,i){return Math.abs(t.start-(n+.66*r))<Math.abs(e.start-(n+.66*r))?{start:t.start,index:i}:e});t.currentItem=s.index,setTimeout(function(){$("[data-canima-item].active").removeClass("active"),t.playItem(t.currentItem),t.isAnimating=!1,t.animateAlongPath("down",t.currentItem)},27)}}o=n}).trigger("scroll.bodyPath"),$("body").off("click.menuClick").on("click.menuClick","[data-menu]",function(e){var n=Math.floor($(e.currentTarget).attr("data-menu")),i=n>=t.currentItem?"down":"up";t.currentItem;var a;a=setTimeout(function(){n="down"==i?Math.floor($(e.currentTarget).attr("data-menu"))-1:Math.floor($(e.currentTarget).attr("data-menu"))+1,t.currentItem=n,t.currentFastItem=n,14!=n&&(console.log(n),$('[data-reset-anima="14"]')[0].beginElement(),$('[data-apath-animation-nr-rev="14"]')[0].beginElement()),t.animateAlongPath(i,t.currentItem),document.getElementById("main_menu_checkbox").checked=!1,clearTimeout(a)},10)})}},{key:"animateAlongPath",value:function(e,t){var n=this,i=this;0!=$(this.runner).attr("cy")&&$(this.runner).attr("cy",0),e=void 0==e||"down"==e?"down":"up",void 0==t&&(t=void 0!=this.currentItem?this.currentItem:0);var a=window.pageYOffset,o=window.innerHeight,r="down"==e?.66:.33;if(!i.isAnimating){i.isAnimating=!0;var s=$("[data-canima-item].active").attr("data-canima-item");if(i.playItemRev(s),$("[data-canima-item].active").removeClass("active"),"down"==e?$('[data-apath-animation-nr="'+t+'"]').each(function(e,t){t.beginElement()}):$('[data-apath-animation-nr-rev="'+(t-1)+'"]').each(function(e,t){t.beginElement()}),"down"==e&&i.pathes[i.currentItem].end>a+r*o||"up"==e&&i.pathes[i.currentItem-1].start<a+r*o){"down"==e?i.pathes[i.currentItem].end:i.pathes[i.currentItem-1].start;switch("up"==e?(i.currentFastItem=i.currentItem-1<=0?0:i.currentItem-1,i.speed[i.currentFastItem]):(i.currentFastItem=i.currentItem+1>i.pathes.length?i.pathes.length:i.currentItem+1,i.speed[i.currentFastItem-1]),i.currentFastItem){case 0:0;break;case 15:i.pathes[i.currentItem].end}i.currentItem=i.currentFastItem;var c=setTimeout(function(){i.isAnimating=!1,n.playItem(n.currentItem),clearTimeout(c)},10)}else{"up"==e?(i.currentFastItem--,i.currentItem--):(i.currentFastItem++,i.currentItem++);var c=setTimeout(function(){i.isAnimating=!1,n.playItem(n.currentItem),clearTimeout(c)},1e3*i.speed[i.currentFastItem]*window.tk)}}}},{key:"playItem",value:function(e){$('[data-canima-item="'+e+'"]').addClass("active"),$('[data-canima="'+e+'"]').each(function(e,t){t.beginElement()}),this.inElements[e]=!0}},{key:"playItemRev",value:function(e){$('[data-canima-rev="'+e+'"]').each(function(e,t){t.beginElement()}),delete this.inElements[e]}},{key:"watchErrors",value:function(){if(Object.keys(this.inElements).length>1){var e=!1;$("body").stop(!0,!0);var t=this.currentItem;this.currentFastItem in this.inElements&&(e=!0);for(var n in this.inElements)n!=t&&this.playItemRev(n);e||this.playItem(t)}}}]),e}(),Titles=function(){function e(){var t=this;_classCallCheck(this,e),this.titles=[],this.onTopPos=30,this.inited=!1,this.workingTitles=[1,4,7,11];var n=0,i=0,a=!0;$(window).off("scroll.titles").on("scroll.titles",function(){i=window.pageYOffset,t.inited&&(a=!(i<n),t.runTitles(a)),n=i})}return _createClass(e,[{key:"init",value:function(){var e=this;this.inited=!1,this.titles=[],this.onTopPos=.03*window.innerWidth,$(".title").each(function(t,n){e.workingTitles.some(function(e){return e==$(n).attr("data-title-item")})&&e.titles.push({id:$(n).attr("data-title-item"),possibleTop:$(n).offset().top,possibleBottom:$(n).offset().top+$(n).outerHeight()-$(n).find(".title-item").outerHeight(),possibleBottomWrapper:$(n).offset().top+$(n).outerHeight()-$(n).find(".title-item").outerHeight(),el:$(n).find(".title-item")[0]})}),this.inited=!0}},{key:"runTitles",value:function(e){var t=this;$(this.titles).each(function(e,n){var i=n.possibleTop<window.pageYOffset+t.onTopPos&&n.possibleBottom<window.pageYOffset+t.onTopPos,a=n.possibleTop<window.pageYOffset+t.onTopPos&&n.possibleBottom>window.pageYOffset+t.onTopPos&&n.possibleBottom<window.pageYOffset+window.innerHeight,o=n.possibleTop>window.pageYOffset+t.onTopPos&&n.possibleTop<window.pageYOffset+window.innerHeight&&n.possibleBottom>window.pageYOffset+t.onTopPos&&n.possibleBottom<window.pageYOffset+window.innerHeight,r=n.possibleTop>window.pageYOffset+t.onTopPos&&n.possibleTop<window.pageYOffset+window.innerHeight&&n.possibleBottom>window.pageYOffset+window.innerHeight,s=n.possibleTop>window.pageYOffset+window.innerHeight&&n.possibleBottom>window.pageYOffset+window.innerHeight,c=n.possibleTop<window.pageYOffset+t.onTopPos&&n.possibleBottom>window.pageYOffset+window.innerHeight;i?$(n.el).addClass("onbottom").removeClass("ontitle"):a||c?$(n.el).addClass("ontitle").removeClass("onbottom"):(o||r||s)&&$(n.el).removeClass("ontitle").removeClass("onbottom")})}}]),e}();window.tk=1,window.is_chrome=navigator.userAgent.indexOf("Chrome")>-1,window.is_explorer=navigator.userAgent.indexOf("MSIE")>-1,window.is_trident=navigator.userAgent.indexOf("Trident")>-1,window.is_edge=navigator.userAgent.indexOf("Edge")>-1,window.is_firefox=navigator.userAgent.indexOf("Firefox")>-1,window.is_safari=navigator.userAgent.indexOf("Safari")>-1,window.is_opera=navigator.userAgent.toLowerCase().indexOf("op")>-1,window.is_chrome&&window.is_safari&&(window.is_safari=!1),window.is_chrome&&window.is_opera&&(window.is_chrome=!1),(window.is_explorer||window.is_trident||window.is_edge)&&(window.location.href="/outdated-browsers");var Application=function e(){_classCallCheck(this,e),this.heroText=new HeroText,this.engine=new Engine,this.menu=new Menu,this.titles=new Titles,this.loader=new Loader(this.engine,this.titles),this.contact=new Contact},app=new Application;